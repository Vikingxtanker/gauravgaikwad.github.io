<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>DIC Form</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">

  <style>
    /* keep readonly inputs visually disabled */
    input[readonly] {
      cursor: not-allowed;
      background-color: #e9ecef;
    }

    /* Keep form narrow (matches your project's style.css which used 600px) */
    .form-container{
      max-width: 600px;   /* ← set narrow */
      margin: 0 auto;
      padding: 1.25rem;
    }

    /* Minimal overrides so checkboxes stay square and labels don't force expansion.
       These are intentionally small and specific so they don't change your overall layout. */
    .form-check {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.5rem;
      /* DO NOT set width:100% here (that made the checkbox stretch previously) */
    }

    .form-check-input {
      width: 1.15rem;
      height: 1.15rem;
      flex: 0 0 auto; /* don't let it grow */
      margin-top: 0; /* vertical alignment with label */
    }

    .form-check-label {
      margin-bottom: 0;
      line-height: 1.2;
      cursor: pointer;
      /* allow label to wrap naturally without pushing the checkbox */
      flex: 1 1 auto;
    }

    @media (max-width: 420px) {
      .form-check-input {
        width: 1rem;
        height: 1rem;
      }
    }

    /* small visual spacing for headings and groups */
    h5 { font-weight: 600; }
    .text-start label { font-weight: 500; display:block; margin-bottom: .25rem; }
  </style>
</head>
<body>

<!-- ✅ Navbar -->
<nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top shadow-sm">
  <div class="container-fluid px-3 d-flex align-items-center justify-content-between">
    <div class="d-flex align-items-center">
      <a class="navbar-brand d-flex align-items-center" href="#">
        <img src="assets/DYP_LOGO_RED.jpg" alt="DYP Logo" height="50" class="me-2">
      </a>
      <div class="navbar-brand-text d-none d-md-block">
        <strong>Dr. D.Y Patil Pratishthan’s</strong><br>
        Dr. D.Y Patil College of Pharmacy Akurdi, Pune – 411044<br>
        <small class="text-muted">Department of Pharmacy Practice (Pharm. D.)</small>
      </div>
    </div>
    <button class="navbar-toggler ms-2" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent"
      aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse justify-content-end mt-2 mt-lg-0" id="navbarContent">
      <ul class="navbar-nav">
        <li class="nav-item"><a class="nav-link fw-semibold" href="dic.html">DIC Home</a></li>
        <li class="nav-item"><a class="nav-link fw-semibold" href="dicform.html">Register</a></li>
        <li class="nav-item"><a class="nav-link fw-semibold" href="dic-guidelines.html">Guidelines</a></li>
        <li class="nav-item"><a class="nav-link fw-semibold" href="dic-about-us.html">About Us</a></li>
      </ul>
    </div>
  </div>
</nav>

<!-- ✅ Form -->
<div class="form-container">
  <form id="dicForm" class="form-controls">

    <div class="d-flex justify-content-end mb-3">
      <button type="button" id="clearAllBtn" class="btn btn-danger btn-sm">Clear All</button>
    </div>

    <!-- Requester Details -->
    <h5 class="mb-3">Drug Information Requesting Form</h5>

    <div class="row mb-3 text-start">
      <div class="col-12">
        <label for="requesterName">Name:</label>
        <input type="text" id="requesterName" class="form-control" required>
      </div>
    </div>

    <div class="row mb-3 text-start">
      <div class="col-12">
        <label for="designation">Designation:</label>
        <input type="text" id="designation" class="form-control" required>
      </div>
    </div>

    <div class="row mb-3 text-start">
      <div class="col-12">
        <label for="deptUnit">Dept/Unit:</label>
        <input type="text" id="deptUnit" class="form-control" required>
      </div>
    </div>

    <div class="row mb-3 text-start">
      <div class="col-12">
        <label for="contactNo">Contact No:</label>
        <input type="tel" id="contactNo" class="form-control" pattern="[0-9]{10}" required>
      </div>
    </div>

    <div class="row mb-3 text-start">
      <div class="col-12">
        <label for="communicationMode">Mode of Communication:</label>
        <select id="communicationMode" class="form-select" required>
          <option value="">--Select--</option>
          <option>Phone</option>
          <option>Email</option>
          <option>In-Person</option>
        </select>
      </div>
    </div>

    <!-- Patient Information -->
    <h5 class="mt-4 mb-3">Patient Information</h5>

    <div class="row mb-3 text-start">
      <div class="col-12">
        <label for="patientAge">Age:</label>
        <input type="number" id="patientAge" class="form-control" required>
      </div>
    </div>

    <div class="row mb-3 text-start">
      <div class="col-12">
        <label for="patientGender">Gender:</label>
        <select id="patientGender" class="form-select" required>
          <option value="">--Select--</option>
          <option>Male</option>
          <option>Female</option>
          <option>Other</option>
        </select>
      </div>
    </div>

    <div class="row mb-3 text-start">
      <div class="col-12">
        <label for="diagnosis">Diagnosis:</label>
        <textarea id="diagnosis" class="form-control" rows="2"></textarea>
      </div>
    </div>

    <div class="row mb-3 text-start">
      <div class="col-12">
        <label for="currentMedication">Current Medication:</label>
        <textarea id="currentMedication" class="form-control" rows="2"></textarea>
      </div>
    </div>

    <div class="row mb-3 text-start">
      <div class="col-12">
        <label for="relevantHistory">Relevant History:</label>
        <textarea id="relevantHistory" class="form-control" rows="2"></textarea>
      </div>
    </div>

<!-- DIC categories container (replace your existing checkbox block) -->
<div id="categorySection" style="padding:12px;border:1px solid #e0e0e0;border-radius:8px;background:#fff;box-shadow:0 2px 6px rgba(0,0,0,0.03);max-width:980px;margin:12px 0;">
  <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;">
    <div style="font-weight:600;font-size:15px;color:#111;">Select query categories</div>
    <div style="display:flex;gap:8px;align-items:center;">
      <button id="selectAllBtn" type="button" style="border:1px solid #2d8cf0;background:#2d8cf0;color:#fff;padding:6px 10px;border-radius:6px;font-size:13px;cursor:pointer;">
        Select all
      </button>
      <button id="clearAllChkBtn" type="button" style="border:1px solid #ccc;background:#fff;color:#333;padding:6px 10px;border-radius:6px;font-size:13px;cursor:pointer;">
        Clear
      </button>
    </div>
  </div>

  <!-- grid of checkbox "chips" -->
  <div id="categoryGrid" style="display:flex;flex-wrap:wrap;gap:10px;">
    <!-- each label acts like a selectable card/chip; input kept for form submission -->
    <label style="display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:10px;border:1px solid #ddd;background:#fafafa;cursor:pointer;user-select:none;min-width:180px;" >
      <input type="checkbox" id="category1" name="categories" value="Drug Interaction" style="width:18px;height:18px;cursor:pointer;" />
      <span style="font-size:14px;color:#222;">Drug Interaction</span>
    </label>

    <label style="display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:10px;border:1px solid #ddd;background:#fafafa;cursor:pointer;user-select:none;min-width:180px;">
      <input type="checkbox" id="category2" name="categories" value="Adverse Drug Reaction" style="width:18px;height:18px;cursor:pointer;" />
      <span style="font-size:14px;color:#222;">Adverse Drug Reaction</span>
    </label>

    <label style="display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:10px;border:1px solid #ddd;background:#fafafa;cursor:pointer;user-select:none;min-width:180px;">
      <input type="checkbox" id="category3" name="categories" value="Dose Adjustment" style="width:18px;height:18px;cursor:pointer;" />
      <span style="font-size:14px;color:#222;">Dose Adjustment</span>
    </label>

    <label style="display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:10px;border:1px solid #ddd;background:#fafafa;cursor:pointer;user-select:none;min-width:180px;">
      <input type="checkbox" id="category4" name="categories" value="Therapeutic Interchange" style="width:18px;height:18px;cursor:pointer;" />
      <span style="font-size:14px;color:#222;">Therapeutic Interchange</span>
    </label>

    <label style="display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:10px;border:1px solid #ddd;background:#fafafa;cursor:pointer;user-select:none;min-width:180px;">
      <input type="checkbox" id="category5" name="categories" value="Polypharmacy Review" style="width:18px;height:18px;cursor:pointer;" />
      <span style="font-size:14px;color:#222;">Polypharmacy Review</span>
    </label>

    <label style="display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:10px;border:1px solid #ddd;background:#fafafa;cursor:pointer;user-select:none;min-width:180px;">
      <input type="checkbox" id="category6" name="categories" value="OTC Counseling" style="width:18px;height:18px;cursor:pointer;" />
      <span style="font-size:14px;color:#222;">OTC Counseling</span>
    </label>

    <label style="display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:10px;border:1px solid #ddd;background:#fafafa;cursor:pointer;user-select:none;min-width:180px;">
      <input type="checkbox" id="category7" name="categories" value="Herb-Drug Interaction" style="width:18px;height:18px;cursor:pointer;" />
      <span style="font-size:14px;color:#222;">Herb-Drug Interaction</span>
    </label>

    <label style="display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:10px;border:1px solid #ddd;background:#fafafa;cursor:pointer;user-select:none;min-width:180px;">
      <input type="checkbox" id="category8" name="categories" value="Other" style="width:18px;height:18px;cursor:pointer;" />
      <span style="font-size:14px;color:#222;">Other</span>
    </label>
  </div>

  <!-- "Other" text input -->
  <div style="margin-top:12px;display:flex;gap:10px;align-items:center;">
    <input id="otherCategory" name="otherCategory" type="text" placeholder="If Other, specify here" style="flex:1;padding:9px 10px;border-radius:8px;border:1px solid #ddd;font-size:14px;outline:none;" />
    <small style="color:#666;font-size:13px;">(optional)</small>
  </div>
</div>


    <!-- Specific Question -->
    <div class="row mb-3 text-start">
      <div class="col-12">
        <label for="specificQuery">Specific Question/Query:</label>
        <textarea id="specificQuery" class="form-control" rows="3" required></textarea>
      </div>
    </div>

    <!-- Level of Urgency -->
    <div class="row mb-3 text-start">
      <div class="col-12">
        <label for="urgencyLevel">Level of Urgency:</label>
        <select id="urgencyLevel" class="form-select" required>
          <option value="">--Select--</option>
          <option>Routine (Reply within 24-48 hours)</option>
          <option>Urgent (Reply within 2-4 hours)</option>
          <option>Emergency</option>
        </select>
      </div>
    </div>

    <!-- Date & Time -->
    <div class="row mb-3 text-start">
      <div class="col-12">
        <label for="requestDateTime">Date & Time of Request:</label>
        <input type="datetime-local" id="requestDateTime" class="form-control" required>
      </div>
    </div>

    <!-- Sign -->
    <div class="row mb-3 text-start">
      <div class="col-12">
        <label for="sign">Sign (optional):</label>
        <input type="text" id="sign" class="form-control">
      </div>
    </div>

    <!-- DIC Use Only Section -->
    <h5 class="mt-4 mb-3">For DIC Use Only</h5>

    <div class="row mb-3 text-start">
      <div class="col-12">
        <label for="receivedBy">Received By:</label>
        <input type="text" id="receivedBy" class="form-control">
      </div>
    </div>

    <div class="row mb-3 text-start">
      <div class="col-12">
        <label for="dicCommMode">Mode of Communication:</label>
        <input type="text" id="dicCommMode" class="form-control">
      </div>
    </div>

    <div class="row mb-3 text-start">
      <div class="col-12">
        <label for="assuredDateTime">Date/Time Assured:</label>
        <input type="datetime-local" id="assuredDateTime" class="form-control">
      </div>
    </div>

    <div class="row mb-3 text-start">
      <div class="col-12">
        <label for="answeredBy">Answered By:</label>
        <input type="text" id="answeredBy" class="form-control">
      </div>
    </div>

    <div class="row mb-3 text-start">
      <div class="col-12">
        <label for="sources">Sources of Information:</label>
        <textarea id="sources" class="form-control" rows="2"></textarea>
      </div>
    </div>

    <div class="row mb-3 text-start">
      <div class="col-12">
        <label for="remark">Remark:</label>
        <textarea id="remark" class="form-control" rows="2"></textarea>
      </div>
    </div>

    <button type="submit" class="btn btn-primary mt-3">Submit</button>
  </form>
</div>

<!-- ✅ Footer -->
<footer class="bg-light text-center py-3 shadow-sm mt-auto">
  <small class="text-muted">© 2025 Designed & Developed by Gaurav Gaikwad & Kumkum Bhenwal</small>
</footer>
    
<!-- ✅ Script Includes -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- dic  form submit -->
<script type="module" src="js/dicform.js"></script>

<!-- ✅ Fix Navbar Overlap Dynamically -->
<script>
  function adjustFormMargin() {
    const navbar = document.querySelector(".navbar");
    const formContainer = document.querySelector(".form-container");
    if (navbar && formContainer) {
      const navHeight = navbar.offsetHeight;
      formContainer.style.marginTop = `${navHeight + 20}px`;
    }
  }

  document.getElementById('clearAllBtn').addEventListener('click', () => {
    document.getElementById('dicForm').reset();
  });

  window.addEventListener("load", adjustFormMargin);
  window.addEventListener("resize", adjustFormMargin);
</script>

<script>
  (function() {
    // IDs for checkboxes (match your markup)
    const chkIds = ["category1","category2","category3","category4","category5","category6","category7","category8"];
    const selectAllBtn = document.getElementById("selectAllBtn");
    const clearAllChkBtn = document.getElementById("clearAllChkBtn");
    const otherInput = document.getElementById("otherCategory");

    // Toggle visual state when a checkbox changes
    function onCheckboxChange(el) {
      const label = el.closest("label");
      if (!label) return;
      if (el.checked) {
        // checked style
        label.style.background = "#e8f4ff";
        label.style.borderColor = "#2d8cf0";
        label.style.boxShadow = "0 2px 6px rgba(45,140,240,0.12)";
        label.querySelector("span").style.color = "#084298";
      } else {
        // unchecked style
        label.style.background = "#fafafa";
        label.style.borderColor = "#ddd";
        label.style.boxShadow = "none";
        label.querySelector("span").style.color = "#222";
      }
    }

    // Attach listeners for all checkboxes
    chkIds.forEach(id => {
      const el = document.getElementById(id);
      if (!el) return;
      // initialize look
      onCheckboxChange(el);
      // when user clicks the label or checkbox, change appearance
      el.addEventListener("change", () => onCheckboxChange(el));
    });

    // Select all / Clear all buttons
    if (selectAllBtn) {
      selectAllBtn.addEventListener("click", () => {
        chkIds.forEach(id => {
          const el = document.getElementById(id);
          if (el) {
            el.checked = true;
            onCheckboxChange(el);
          }
        });
      });
    }

    if (clearAllChkBtn) {
      clearAllChkBtn.addEventListener("click", () => {
        chkIds.forEach(id => {
          const el = document.getElementById(id);
          if (el) {
            el.checked = false;
            onCheckboxChange(el);
          }
        });
        // clear other field too
        if (otherInput) otherInput.value = "";
      });
    }

    // If user types something in "other" we ensure "Other" checkbox is checked
    if (otherInput) {
      otherInput.addEventListener("input", () => {
        const otherChk = document.getElementById("category8");
        if (!otherChk) return;
        if (otherInput.value.trim()) {
          otherChk.checked = true;
        } else {
          // don't auto-uncheck if user checked explicitly — keep it unset
          // still update visual
          otherChk.checked = false;
        }
        onCheckboxChange(otherChk);
      });
    }

    // Make label clicks toggle the checkbox even if label has no "for" attr (robust)
    document.getElementById("categorySection")?.addEventListener("click", (ev) => {
      const lbl = ev.target.closest("label");
      if (!lbl) return;
      // prevent clicks on the input from double toggling
      const input = lbl.querySelector("input[type=checkbox]");
      if (!input) return;
      // if the click target was the input element itself, let default happen
      if (ev.target === input) return;
      // otherwise toggle
      input.checked = !input.checked;
      input.dispatchEvent(new Event("change", { bubbles: true }));
    });

  })();
</script>


</body>
</html>
